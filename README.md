###Mongo Tutorial Command Sheet - from *newboston's* Tutorials
$ mongo

**Specify new database if not exists (it doesn't persist it straight away):**
```
use <name_of_db>
```
```
use bank
```

**List current database and all persisted databases:**
```
db
show dbs
```

**Drop current database:**
```
db.dropDatabase()
```
**Insert data from [buckyrobert's repo](https://github.com/buckyroberts/Source-Code-from-Tutorials/blob/master/Other/SampleJsonData/fake_bank_data.json):**
```
// create new collection users and insert data to it
db.users.insert{
  [
    {
      "isActive": false,
      "balance": "$3,960.64",
      "age": 30,
      "eyeColor": "blue",
      "name": "Dawn Keith",or:
      "gender": "female",
      "company": "COSMOSIS",
      "email": "dawnkeith@cosmosis.com",
      "phone": "+1 (839) 437-3421",
      "address": "392 Clifford Place, Fontanelle, Arizona, 2687"
    },
    {
      "isActive": false,
      "balance": "$1,280.14",
      "age": 31,
      "eyeColor": "green",
      "name": "Bettie Eaton",
      "gender": "female",
      "company": "COMTREK",
      "email": "bettieeaton@comtrek.com",
      "phone": "+1 (861) 460-2317",
      "address": "203 Allen Avenue, Elrama, North Carolina, 4453"
    }
  ]
}
```

**Listing documents (registries):**
```
db.users.find() // shows all documents
```
```
db.users.findOne()
```
```
db.users.find().limit(10) // shows only 10 documents
```
```
db.users.find().skip(3) // shows after the third document
```

**Prettify output:**
```
db.users.find().pretty()
```

**Select by attribute:**
```
db.users.find(
  {
```
```
// comparison keywords: $lt, &gt, $lte, $gte and $ne
db.users.find(
  {
    "age": {$lt:23}
  }
)
```
```
// AND clause
db.users.find(
  {
      "age": {$lt:23},
      "company":"OVATION"
  }
)
    $or: [
      {"isActive":true},
      {"age": { $gte: 30 } }
    ]
  }
).pretty()
```

**Formating output:**
```
db.users.find(
  { "age": { $lt: 40 } },
  {"name": 1, _id: 0}
)
```

**Select by attribute:**
```
db.users.find(
  {
    "_id" : ObjectId("564a144ce1d05d069814a197") // autogenerated id
  }
)
```
```
// comparison keywords: $lt, &gt, $lte, $gte and $ne
db.users.find(
  {
    "age": {$lt:23}
  }
)
```
```
db.users.find(
  { "isActive": true },
  { "name": 1, "phone": 1, _id: 0 }
)
```

**Inspect Query:**
```
db.users.find({ "age": {$lt:23} }).explain()
```
```
db.users.find({ "age": {$lt:23} }).explain("executionStats")
```

**Indexes:**
```
db.users.ensureIndex({"age": 1})
```
```
db.users.getIndexes()
```
```
db.users.dropIndex({"age": 1})
```

**Indexes:**
```
db.users.aggregate(
  {
    $group: {
      _id: "$gender", avgAge: { $sum : "$age" }
    }
  }
)
```

**Creating a database user:**
```
use bank
db.createUser(
    {
      user: "testing",
      pwd: "123456",
      roles: [
         { role: "readWrite", db: "users" },
         { role: "read", db: "products" },
         { role: "read", db: "sales" }
      ]
    }
)
```
